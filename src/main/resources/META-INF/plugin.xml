<idea-plugin>
    <id>com.cherryleafroad.rust.playground</id>
    <name>Rust Playground</name>
    <vendor url="https://github.com/cherryleafroad/" email="cherryleafroad.software@gmail.com">Cherryleafroad Software</vendor>

    <depends>com.intellij.modules.platform</depends>
    <depends>org.rust.lang</depends>
    <depends>org.toml.lang</depends>

    <description>Use a local Rust playground straight from your IDE!</description>

    <change-notes>
<![CDATA[
<h3>1.0.2</h3>
<ul>
    <li>Fixed bug where toolchain selection didn't change compiler toolchain properly</li>
    <li>Fixed broken keyboard shortcut</li>
    <li>Want to try the new beta? It comes with a new editor toolbar and no more comments are required! Visit the market plugin page for instructions~ (Above bug is still unfixed in beta btw)</li>
</ul>
    ]]>
    </change-notes>

    <extensions defaultExtensionNs="com.intellij">
        <scratch.creationHelper language="Rust" implementationClass="com.cherryleafroad.rust.playground.RustScratchCreationHelper"/>
        <fileDocumentManagerListener implementation="com.cherryleafroad.rust.playground.listeners.FileListener"/>

        <projectConfigurable instance="com.cherryleafroad.rust.playground.config.SettingsConfigurable" id="Rust.Playground.Settings"
                             displayName="Playground" nonDefaultProject="true" groupId="language" parentId="language.rust"/>

        <notificationGroup id="Rust Playground" displayType="BALLOON"/>
        <editorNotificationProvider implementation="com.cherryleafroad.rust.playground.notifications.CargoPlayNotInstalledNotificationProvider"/>
    </extensions>

    <applicationListeners>
        <listener class="com.cherryleafroad.rust.playground.listeners.ProjectManagerListener"
                  topic="com.intellij.openapi.project.ProjectManagerListener"/>
    </applicationListeners>

    <actions>
        <action id="Rust.Playground.Run" class="com.cherryleafroad.rust.playground.actions.RunAction"
                text="Run in Playground" description="Runs the currently open scratch file in Rust Playground"
                icon="AllIcons.Actions.Execute">
            <keyboard-shortcut keymap="$default" first-keystroke="ctrl COMMA"/>
            <add-to-group group-id="Rust.Tools" anchor="last"/>
        </action>

        <group id="Rust.Playground.RunMenu" class="com.cherryleafroad.rust.playground.actions.PlaygroundGroup">
            <reference id="Rust.Playground.Run"/>
            <add-to-group group-id="RunMenu" anchor="before" relative-to-action="ChooseRunConfiguration"/>
            <separator/>
        </group>
    </actions>
</idea-plugin>
